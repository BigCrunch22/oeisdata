%I A365316 #19 Sep 17 2023 03:00:58
%S A365316 1,5,8,16,21,26,38,45,52,59,75,84,93,102,111,131,142,153,164,175,186,
%T A365316 210,223,236,249,262,275,288,316,331,346,361,376,391,406,421,453,470,
%U A365316 487,504,521,538,555,572,589,625,644,663,682,701,720,739,758,777,796,836
%N A365316 a(n) = number of visible diamonds (squares rotated by 45 degrees with diagonal 2) in the large square bounded by the parabola y=x^2 and starting from the point (0, 2n).
%H A365316 Anatoliy A. Abramov, <a href="/A365316/a365316.jpg">Squares and parabola visualisation</a>
%F A365316 a(n) = f(n) + a(n - 1), where f(n) = Sum_{i=size(n-1)..size(n)} 2 * i - 1 and size(n) = floor((1 + sqrt(1 + 8 * n) / 2)
%e A365316 Illustration for a(3) = 16
%e A365316        / \
%e A365316       /   \
%e A365316     / \ a / \
%e A365316    /   \ /   \
%e A365316  / \ a / \ a / \
%e A365316 /   \ /   \ /   \
%e A365316 \ a / \ a / \ a /
%e A365316  \ /   \ /   \ /
%e A365316    \ a / \ a /
%e A365316     \ /   \ /
%e A365316     / \ b / \
%e A365316    /   \ /   \
%e A365316    \ b / \ b /
%e A365316     \ /   \ /
%e A365316     / \ c / \
%e A365316    /   \ /   \
%e A365316    \ c / \ c /
%e A365316     \ /   \ /
%e A365316       \ c /
%e A365316        \ /
%e A365316        / \
%e A365316       /   \
%e A365316       \ d /
%e A365316        \ /
%e A365316 1) "a" squares builds from point (0, 6). Big square a has the diagonal size 3 * 2 = 6 with points (-3, 9) and (3, 9); Parabola bounds big square in points (-3, 9) and (3, 9)
%e A365316 2) "b" squares builds from point(0, 4). Big square b has the diagonal size 2 * 2 = 4 with points (-2, 6) and (2, 6); Parabola bounds big square in points (-2, sqrt(6)) and (2, sqrt(6))
%e A365316 3) "c" squares c's builds from point(0, 2). Big square c has the diagonal size 2 * 2 = 4 with points (-2, 4) and (2, 4); Parabola bounds big square in points (-2, 2) and (2, 2)
%e A365316 4) "d" squares d's builds from point(0, 0). Big square d has the diagonal size 1 * 2 = 2 with points (-1, 1) and (1, 1); Parabola bounds big square in points (-1, 1) and (1, 1)
%o A365316 (Java)
%o A365316 import java.util.stream.IntStream;
%o A365316 public class Main {
%o A365316     public static void main(String[] args) {
%o A365316         IntStream.rangeClosed(0, 100).forEach(it -> System.out.printf("%d, ", sumAllVisibleSquare(it)));
%o A365316     }
%o A365316     private static int maxSquareSize(int n) {
%o A365316         return (int) Math.floor((1 + Math.sqrt(1 + 8 * n)) / 2);
%o A365316     }
%o A365316     private static int sumVisibleSquares(int n) {
%o A365316         int upSquareSize = maxSquareSize(n);
%o A365316         int lowSquareSize = maxSquareSize(n - 1);
%o A365316         return IntStream.rangeClosed(lowSquareSize, upSquareSize).map(it -> it + (it - 1)).sum();
%o A365316     }
%o A365316     private static int sumAllVisibleSquare(int n) {
%o A365316         return n == 0 ? 1 : sumVisibleSquares(n) + sumAllVisibleSquare(n - 1);
%o A365316     }
%o A365316 }
%K A365316 nonn,new
%O A365316 0,2
%A A365316 _Anatoliy A. Abramov_, Sep 01 2023
